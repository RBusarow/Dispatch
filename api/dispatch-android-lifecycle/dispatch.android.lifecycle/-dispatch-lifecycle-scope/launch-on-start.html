<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>launchOnStart</title>
</head><body><link href="../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../../";</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
const savedDarkMode = storage ? JSON.parse(storage) : false
if(savedDarkMode === true){
    document.getElementsByTagName("html")[0].classList.add("theme-dark")
}</script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async></script><link href="../../../styles/style.css" rel="Stylesheet"><link href="../../../styles/jetbrains-mono.css" rel="Stylesheet"><link href="../../../styles/main.css" rel="Stylesheet"><link href="../../../styles/prism.css" rel="Stylesheet"><link href="../../../styles/logo-styles.css" rel="Stylesheet"><script type="text/javascript" src="../../../scripts/clipboard.js" async></script><script type="text/javascript" src="../../../scripts/navigation-loader.js" async></script><script type="text/javascript" src="../../../scripts/platform-content-handler.js" async></script><script type="text/javascript" src="../../../scripts/main.js" defer></script><script type="text/javascript" src="../../../scripts/prism.js" async></script><script src="https://unpkg.com/kotlin-playground@1"></script><script src="https://unpkg.com/kotlin-playground@1"></script>
  
    <div class="navigation-wrapper" id="navigation-wrapper">
      <div id="leftToggler"><span class="icon-toggler"></span></div>
      <div class="library-name"><a href="../../../index.html"><span>Dispatch</span></a></div>
      <div></div>
      <div class="pull-right d-flex"><button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
      </div>
    </div>
    <div id="container">
      <div id="leftColumn">
        <div id="sideMenu"></div>
      </div>
      <div id="main">
        <div class="main-content" id="content" pageids="dispatch-android-lifecycle::dispatch.android.lifecycle/DispatchLifecycleScope/launchOnStart/#kotlin.coroutines.CoroutineContext#dispatch.android.lifecycle.DispatchLifecycleScope.MinimumStatePolicy#kotlin.coroutines.SuspendFunction1[kotlinx.coroutines.CoroutineScope,kotlin.Unit]/PointingToDeclaration//296330618">
          <div class="breadcrumbs"><a href="../../index.html">dispatch-android-lifecycle</a>/<a href="../index.html">dispatch.android.lifecycle</a>/<a href="index.html">DispatchLifecycleScope</a>/<a href="launch-on-start.html">launchOnStart</a></div>
          <div class="cover ">
            <h1 class="cover"><span>launch</span><wbr><span>On</span><wbr><span><span>Start</span></span></h1>
          </div>
          <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="symbol monospace"><span class="token keyword"></span><span class="token keyword">fun </span><a href="launch-on-start.html"><span class="token function">launchOnStart</span></a><span class="token punctuation">(</span>context<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines/-coroutine-context/index.html">CoroutineContext</a><span class="token operator"> = </span>EmptyCoroutineContext<span class="token punctuation">, </span>minimumStatePolicy<span class="token operator">: </span><a href="-minimum-state-policy/index.html">DispatchLifecycleScope.MinimumStatePolicy</a><span class="token operator"> = </span>MinimumStatePolicy.RESTART_EVERY<span class="token punctuation">, </span>block<span class="token operator">: </span><span class="token keyword">suspend </span><span class="token keyword"></span><span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token punctuation">)</span><span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Lifecycle-aware function for launching a coroutine any time the <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html">Lifecycle.State</a> is at least <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html#STARTED">Lifecycle.State.STARTED</a>.</p><p class="paragraph"><code class="lang-kotlin">block</code> is executed using the receiver <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span>'s <span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span> as a parent, but always executes using <span data-unresolved-link="kotlinx.coroutines/Dispatchers/Main/#/PointingToDeclaration/">Dispatchers.Main</span> as its <span data-unresolved-link="kotlinx.coroutines/CoroutineDispatcher///PointingToDeclaration/">CoroutineDispatcher</span>.</p><p class="paragraph">Execution of <code class="lang-kotlin">block</code> is cancelled when the receiver <span data-unresolved-link="kotlinx.coroutines/CoroutineScope///PointingToDeclaration/">CoroutineScope</span> is cancelled, or when <a href="lifecycle.html">lifecycle</a>'s <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html">Lifecycle.State</a> drops below <a href="https://developer.android.com/reference/kotlin/androidx/lifecycle/Lifecycle.State.html#STARTED">Lifecycle.State.STARTED</a>.</p><h2 class="">Samples</h2><div class="sample-container"><pre><code class="runnablesample monospace block lang-kotlin" theme="idea">import dispatch.android.lifecycle.DispatchLifecycleScope
import dispatch.android.lifecycle.DispatchLifecycleScope.MinimumStatePolicy.CANCEL
import dispatch.android.lifecycle.dispatchLifecycleScope
import dispatch.core.DispatcherProvider
import dispatch.core.launchMain
import dispatch.internal.test.Sample5
import dispatch.internal.test.android.LiveDataTest
import dispatch.test.CoroutineTest
import io.kotest.matchers.shouldBe
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.Job
import kotlinx.coroutines.channels.Channel
import kotlinx.coroutines.flow.collect
import kotlinx.coroutines.flow.flow
import kotlinx.coroutines.runBlocking
fun main() { 
   //sampleStart 
   runBlocking {

    val channel = Channel&lt;String&gt;()
    val history = mutableListOf&lt;String&gt;()

    class SomeViewModel {
      val someFlow = flow {
        repeat(100) {
          emit(it)
        }
      }
    }

    class SomeFragment : Fragment() {

      val viewModel = SomeViewModel()

      init {
        dispatchLifecycleScope.launchOnStart(minimumStatePolicy = CANCEL) {
          viewModel.someFlow.collect {
            channel.send("$it")
          }
        }
      }
    }

    val fragment = SomeFragment()

    history.add("starting")
    fragment.start()

    repeat(3) {
      history.add(channel.receive())
    }

    // stopping the lifecycle cancels the existing Job
    history.add("stopping")
    fragment.stop()

    // starting the lifecycle does not create a new Job

    history shouldBe listOf(
      "starting",
      "0",
      "1",
      "2",
      "stopping"
    )
  } 
   //sampleEnd
}</code></pre></div><div class="sample-container"><pre><code class="runnablesample monospace block lang-kotlin" theme="idea">import dispatch.android.lifecycle.DispatchLifecycleScope
import dispatch.android.lifecycle.DispatchLifecycleScope.MinimumStatePolicy.CANCEL
import dispatch.android.lifecycle.dispatchLifecycleScope
import dispatch.core.DispatcherProvider
import dispatch.core.launchMain
import dispatch.internal.test.Sample5
import dispatch.internal.test.android.LiveDataTest
import dispatch.test.CoroutineTest
import io.kotest.matchers.shouldBe
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.Job
import kotlinx.coroutines.channels.Channel
import kotlinx.coroutines.flow.collect
import kotlinx.coroutines.flow.flow
import kotlinx.coroutines.runBlocking
fun main() { 
   //sampleStart 
   runBlocking {

    val channel = Channel&lt;String&gt;()
    val history = mutableListOf&lt;String&gt;()

    class SomeViewModel {
      val someFlow = flow {
        repeat(100) {
          emit(it)
        }
      }
    }

    class SomeFragment : Fragment() {

      val viewModel = SomeViewModel()

      init {
        dispatchLifecycleScope.launchOnStart {
          viewModel.someFlow.collect {
            channel.send("$it")
          }
        }
      }
    }

    val fragment = SomeFragment()

    history.add("starting")
    fragment.start()

    repeat(3) {
      history.add(channel.receive())
    }

    // stopping the lifecycle cancels the existing Job
    history.add("stopping")
    fragment.stop()

    // starting the lifecycle creates a new Job
    history.add("starting")
    fragment.start()

    repeat(3) {
      history.add(channel.receive())
    }

    history.add("stopping")
    fragment.stop()

    history shouldBe listOf(
      "starting",
      "0",
      "1",
      "2",
      "stopping",
      "starting",
      "0",
      "1",
      "2",
      "stopping"
    )
  } 
   //sampleEnd
}</code></pre></div><h2 class="">Parameters</h2><div data-togglable="Parameters"><div class="table" data-togglable="Parameters"><div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/release" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><span><span>context</span></span></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph"><i>optional</i> - additional to <a href="../-view-lifecycle-coroutine-scope/index.html#-1654120400%2FProperties%2F296330618">CoroutineScope.coroutineContext</a> context of the     coroutine.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/release" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><span>minimum</span><wbr><span>State</span><wbr><span><span>Policy</span></span></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph"><i>optional</i> - the way this <span data-unresolved-link="kotlinx.coroutines/Job///PointingToDeclaration/">Job</span> will behave when passing below the     minimum state or re-entering. Uses <a href="-minimum-state-policy/-r-e-s-t-a-r-t_-e-v-e-r-y/index.html">MinimumStatePolicy.RESTART_EVERY</a> by default.</p></div></div></div></div></div><div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/release" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/release"><div class="main-subrow keyValue WithExtraAttributes"><div class=""><span class="inline-flex"><div><span><span>block</span></span></div></span></div><div><div class="title"><div data-togglable="Parameters"><p class="paragraph">the action to be performed</p></div></div></div></div></div></div></div></div></div>
          <h2 class="">Sources</h2>
          <div class="table" data-togglable="Sources"><a data-name="281843071%2FSource%2F1121864922" anchor-label="https://github.com/RBusarow/Dispatch/blob/main/dispatch-android-lifecycle/dokkaHtmlPartial/src/main/java/dispatch/android/lifecycle/DispatchLifecycleScope.kt#L115" id="281843071%2FSource%2F1121864922" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/main"></a>
            <div class="table-row" data-filterable-current=":dispatch-android-lifecycle:dokkaHtmlPartial/main" data-filterable-set=":dispatch-android-lifecycle:dokkaHtmlPartial/main">
              <div class="main-subrow keyValue ">
                <div class=""><span class="inline-flex">
                    <div><a href="https://github.com/RBusarow/Dispatch/blob/main/dispatch-android-lifecycle/dokkaHtmlPartial/src/main/java/dispatch/android/lifecycle/DispatchLifecycleScope.kt#L115">androidJvm source</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="281843071%2FSource%2F1121864922"></span>
                      <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
                    </span></span></div>
                <div></div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer"><span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2022 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span></div>
      </div>
    </div>
  
</body></html>


